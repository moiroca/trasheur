{"version":3,"sources":["dropzone-config.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"dropzone-config.js","sourcesContent":["var photo_counter = 0;\nDropzone.options.realDropzone = {\n\n    uploadMultiple: false,\n    parallelUploads: 100,\n    maxFilesize: 8,\n    previewsContainer: '#dropzonePreview',\n    previewTemplate: document.querySelector('#preview-template').innerHTML,\n    addRemoveLinks: true,\n    dictRemoveFile: 'Remove',\n    dictFileTooBig: 'Image is bigger than 8MB',\n    dictRemoveFileConfirmation: \"Are you sure you wish to delete this image?\",\n\n    // The setting up of the dropzone\n    init:function() {\n\n        // Add server images\n        var myDropzone = this;\n\n        // $.get('/server-images', function(data) {\n\n        //     $.each(data.images, function (key, value) {\n\n        //         var file = {name: value.original, size: value.size};\n        //         myDropzone.options.addedfile.call(myDropzone, file);\n        //         myDropzone.createThumbnailFromUrl(file, 'images/icon_size/' + value.server);\n        //         myDropzone.emit(\"complete\", file);\n        //         $('.serverfilename', file.previewElement).val(value.server);\n        //         photo_counter++;\n        //         $(\"#photoCounter\").text( \"(\" + photo_counter + \")\");\n        //     });\n        // });\n\n        this.on(\"removedfile\", function(file) {\n\n            $.ajax({\n                type: 'POST',\n                url: 'upload/delete',\n                data: {id: $('.serverfilename', file.previewElement).val() , _token: $('#csrf-token').val()},\n                dataType: 'html',\n                success: function(data){\n                    var rep = JSON.parse(data);\n                    if(rep.code == 200)\n                    {\n                        photo_counter--;\n                        $(\"#photoCounter\").text( \"(\" + photo_counter + \")\");\n                    }\n\n                }\n            });\n\n        } );\n    },\n    error: function(file, response) {\n        if($.type(response) === \"string\")\n            var message = response; //dropzone sends it's own error messages in string\n        else\n            var message = response.message;\n        file.previewElement.classList.add(\"dz-error\");\n        _ref = file.previewElement.querySelectorAll(\"[data-dz-errormessage]\");\n        _results = [];\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            node = _ref[_i];\n            _results.push(node.textContent = message);\n        }\n        return _results;\n    },\n    success: function(file,response) {\n        $('.serverfilename', file.previewElement).val(response.filename);\n        photo_counter++;\n        $(\"#photoCounter\").text( \"(\" + photo_counter + \")\");\n    }\n}\n"]}